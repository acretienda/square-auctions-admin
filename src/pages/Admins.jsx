import React, {useEffect, useState} from 'react';import { listAdmins, createAdmin, deleteAdmin } from '../services/api';
export default function Admins(){const [admins,setAdmins]=useState([]);const [email,setEmail]=useState('');const [password,setPassword]=useState('');
useEffect(()=>load(),[]);
async function load(){try{const r=await listAdmins();setAdmins(r.data)}catch(e){alert('No autorizado');}}
async function handleCreate(e){e.preventDefault();try{await createAdmin({email,password});setEmail('');setPassword('');load()}catch(err){alert('Create failed: '+(err.response?.data?.error||err.message))}}
async function handleDelete(id){if(!confirm('Borrar admin?')) return;try{await deleteAdmin(id);load()}catch(err){alert('Delete failed')}}return (<div><h3>Admins</h3><form onSubmit={handleCreate}><input className="input" placeholder="email" value={email} onChange={e=>setEmail(e.target.value)} /><input className="input" placeholder="password" value={password} onChange={e=>setPassword(e.target.value)} /><button className="btn" type="submit">Crear admin</button></form><table className="table"><thead><tr><th>ID</th><th>Email</th><th>Creado</th><th>Acci√≥n</th></tr></thead><tbody>{admins.map(a=> (<tr key={a.id}><td>{a.id}</td><td>{a.email}</td><td>{new Date(a.created_at).toLocaleString()}</td><td><button className="btn" onClick={()=>handleDelete(a.id)}>Borrar</button></td></tr>))}</tbody></table></div>)}